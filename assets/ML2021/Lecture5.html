<!doctype html>
<html>
<head>
<meta charset='UTF-8'><meta name='viewport' content='width=device-width initial-scale=1'>
<title>Lecture 5ï¼šTransformer</title><link href='https://fonts.loli.net/css?family=Open+Sans:400italic,700italic,700,400&subset=latin,latin-ext' rel='stylesheet' type='text/css' /><style type='text/css'>html {overflow-x: initial !important;}:root { --bg-color:#ffffff; --text-color:#333333; --select-text-bg-color:#B5D6FC; --select-text-font-color:auto; --monospace:"Lucida Console",Consolas,"Courier",monospace; }
html { font-size: 14px; background-color: var(--bg-color); color: var(--text-color); font-family: "Helvetica Neue", Helvetica, Arial, sans-serif; -webkit-font-smoothing: antialiased; }
body { margin: 0px; padding: 0px; height: auto; bottom: 0px; top: 0px; left: 0px; right: 0px; font-size: 1rem; line-height: 1.42857; overflow-x: hidden; background: inherit; tab-size: 4; }
iframe { margin: auto; }
a.url { word-break: break-all; }
a:active, a:hover { outline: 0px; }
.in-text-selection, ::selection { text-shadow: none; background: var(--select-text-bg-color); color: var(--select-text-font-color); }
#write { margin: 0px auto; height: auto; width: inherit; word-break: normal; overflow-wrap: break-word; position: relative; white-space: normal; overflow-x: visible; padding-top: 40px; }
#write.first-line-indent p { text-indent: 2em; }
#write.first-line-indent li p, #write.first-line-indent p * { text-indent: 0px; }
#write.first-line-indent li { margin-left: 2em; }
.for-image #write { padding-left: 8px; padding-right: 8px; }
body.typora-export { padding-left: 30px; padding-right: 30px; }
.typora-export .footnote-line, .typora-export li, .typora-export p { white-space: pre-wrap; }
@media screen and (max-width: 500px) {
  body.typora-export { padding-left: 0px; padding-right: 0px; }
  #write { padding-left: 20px; padding-right: 20px; }
  .CodeMirror-sizer { margin-left: 0px !important; }
  .CodeMirror-gutters { display: none !important; }
}
#write li > figure:last-child { margin-bottom: 0.5rem; }
#write ol, #write ul { position: relative; }
img { max-width: 100%; vertical-align: middle; image-orientation: from-image; }
button, input, select, textarea { color: inherit; font: inherit; }
input[type="checkbox"], input[type="radio"] { line-height: normal; padding: 0px; }
*, ::after, ::before { box-sizing: border-box; }
#write h1, #write h2, #write h3, #write h4, #write h5, #write h6, #write p, #write pre { width: inherit; }
#write h1, #write h2, #write h3, #write h4, #write h5, #write h6, #write p { position: relative; }
p { line-height: inherit; }
h1, h2, h3, h4, h5, h6 { break-after: avoid-page; break-inside: avoid; orphans: 4; }
p { orphans: 4; }
h1 { font-size: 2rem; }
h2 { font-size: 1.8rem; }
h3 { font-size: 1.6rem; }
h4 { font-size: 1.4rem; }
h5 { font-size: 1.2rem; }
h6 { font-size: 1rem; }
.md-math-block, .md-rawblock, h1, h2, h3, h4, h5, h6, p { margin-top: 1rem; margin-bottom: 1rem; }
.hidden { display: none; }
.md-blockmeta { color: rgb(204, 204, 204); font-weight: 700; font-style: italic; }
a { cursor: pointer; }
sup.md-footnote { padding: 2px 4px; background-color: rgba(238, 238, 238, 0.7); color: rgb(85, 85, 85); border-radius: 4px; cursor: pointer; }
sup.md-footnote a, sup.md-footnote a:hover { color: inherit; text-transform: inherit; text-decoration: inherit; }
#write input[type="checkbox"] { cursor: pointer; width: inherit; height: inherit; }
figure { overflow-x: auto; margin: 1.2em 0px; max-width: calc(100% + 16px); padding: 0px; }
figure > table { margin: 0px; }
tr { break-inside: avoid; break-after: auto; }
thead { display: table-header-group; }
table { border-collapse: collapse; border-spacing: 0px; width: 100%; overflow: auto; break-inside: auto; text-align: left; }
table.md-table td { min-width: 32px; }
.CodeMirror-gutters { border-right: 0px; background-color: inherit; }
.CodeMirror-linenumber { user-select: none; }
.CodeMirror { text-align: left; }
.CodeMirror-placeholder { opacity: 0.3; }
.CodeMirror pre { padding: 0px 4px; }
.CodeMirror-lines { padding: 0px; }
div.hr:focus { cursor: none; }
#write pre { white-space: pre-wrap; }
#write.fences-no-line-wrapping pre { white-space: pre; }
#write pre.ty-contain-cm { white-space: normal; }
.CodeMirror-gutters { margin-right: 4px; }
.md-fences { font-size: 0.9rem; display: block; break-inside: avoid; text-align: left; overflow: visible; white-space: pre; background: inherit; position: relative !important; }
.md-diagram-panel { width: 100%; margin-top: 10px; text-align: center; padding-top: 0px; padding-bottom: 8px; overflow-x: auto; }
#write .md-fences.mock-cm { white-space: pre-wrap; }
.md-fences.md-fences-with-lineno { padding-left: 0px; }
#write.fences-no-line-wrapping .md-fences.mock-cm { white-space: pre; overflow-x: auto; }
.md-fences.mock-cm.md-fences-with-lineno { padding-left: 8px; }
.CodeMirror-line, twitterwidget { break-inside: avoid; }
.footnotes { opacity: 0.8; font-size: 0.9rem; margin-top: 1em; margin-bottom: 1em; }
.footnotes + .footnotes { margin-top: 0px; }
.md-reset { margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: top; background: 0px 0px; text-decoration: none; text-shadow: none; float: none; position: static; width: auto; height: auto; white-space: nowrap; cursor: inherit; -webkit-tap-highlight-color: transparent; line-height: normal; font-weight: 400; text-align: left; box-sizing: content-box; direction: ltr; }
li div { padding-top: 0px; }
blockquote { margin: 1rem 0px; }
li .mathjax-block, li p { margin: 0.5rem 0px; }
li { margin: 0px; position: relative; }
blockquote > :last-child { margin-bottom: 0px; }
blockquote > :first-child, li > :first-child { margin-top: 0px; }
.footnotes-area { color: rgb(136, 136, 136); margin-top: 0.714rem; padding-bottom: 0.143rem; white-space: normal; }
#write .footnote-line { white-space: pre-wrap; }
@media print {
  body, html { border: 1px solid transparent; height: 99%; break-after: avoid; break-before: avoid; font-variant-ligatures: no-common-ligatures; }
  #write { margin-top: 0px; padding-top: 0px; border-color: transparent !important; }
  .typora-export * { -webkit-print-color-adjust: exact; }
  html.blink-to-pdf { font-size: 13px; }
  .typora-export #write { padding-left: 32px; padding-right: 32px; padding-bottom: 0px; break-after: avoid; }
  .typora-export #write::after { height: 0px; }
  .is-mac table { break-inside: avoid; }
}
.footnote-line { margin-top: 0.714em; font-size: 0.7em; }
a img, img a { cursor: pointer; }
pre.md-meta-block { font-size: 0.8rem; min-height: 0.8rem; white-space: pre-wrap; background: rgb(204, 204, 204); display: block; overflow-x: hidden; }
p > .md-image:only-child:not(.md-img-error) img, p > img:only-child { display: block; margin: auto; }
#write.first-line-indent p > .md-image:only-child:not(.md-img-error) img { left: -2em; position: relative; }
p > .md-image:only-child { display: inline-block; width: 100%; }
#write .MathJax_Display { margin: 0.8em 0px 0px; }
.md-math-block { width: 100%; }
.md-math-block:not(:empty)::after { display: none; }
[contenteditable="true"]:active, [contenteditable="true"]:focus, [contenteditable="false"]:active, [contenteditable="false"]:focus { outline: 0px; box-shadow: none; }
.md-task-list-item { position: relative; list-style-type: none; }
.task-list-item.md-task-list-item { padding-left: 0px; }
.md-task-list-item > input { position: absolute; top: 0px; left: 0px; margin-left: -1.2em; margin-top: calc(1em - 10px); border: none; }
.math { font-size: 1rem; }
.md-toc { min-height: 3.58rem; position: relative; font-size: 0.9rem; border-radius: 10px; }
.md-toc-content { position: relative; margin-left: 0px; }
.md-toc-content::after, .md-toc::after { display: none; }
.md-toc-item { display: block; color: rgb(65, 131, 196); }
.md-toc-item a { text-decoration: none; }
.md-toc-inner:hover { text-decoration: underline; }
.md-toc-inner { display: inline-block; cursor: pointer; }
.md-toc-h1 .md-toc-inner { margin-left: 0px; font-weight: 700; }
.md-toc-h2 .md-toc-inner { margin-left: 2em; }
.md-toc-h3 .md-toc-inner { margin-left: 4em; }
.md-toc-h4 .md-toc-inner { margin-left: 6em; }
.md-toc-h5 .md-toc-inner { margin-left: 8em; }
.md-toc-h6 .md-toc-inner { margin-left: 10em; }
@media screen and (max-width: 48em) {
  .md-toc-h3 .md-toc-inner { margin-left: 3.5em; }
  .md-toc-h4 .md-toc-inner { margin-left: 5em; }
  .md-toc-h5 .md-toc-inner { margin-left: 6.5em; }
  .md-toc-h6 .md-toc-inner { margin-left: 8em; }
}
a.md-toc-inner { font-size: inherit; font-style: inherit; font-weight: inherit; line-height: inherit; }
.footnote-line a:not(.reversefootnote) { color: inherit; }
.md-attr { display: none; }
.md-fn-count::after { content: "."; }
code, pre, samp, tt { font-family: var(--monospace); }
kbd { margin: 0px 0.1em; padding: 0.1em 0.6em; font-size: 0.8em; color: rgb(36, 39, 41); background: rgb(255, 255, 255); border: 1px solid rgb(173, 179, 185); border-radius: 3px; box-shadow: rgba(12, 13, 14, 0.2) 0px 1px 0px, rgb(255, 255, 255) 0px 0px 0px 2px inset; white-space: nowrap; vertical-align: middle; }
.md-comment { color: rgb(162, 127, 3); opacity: 0.8; font-family: var(--monospace); }
code { text-align: left; vertical-align: initial; }
a.md-print-anchor { white-space: pre !important; border-width: initial !important; border-style: none !important; border-color: initial !important; display: inline-block !important; position: absolute !important; width: 1px !important; right: 0px !important; outline: 0px !important; background: 0px 0px !important; text-decoration: initial !important; text-shadow: initial !important; }
.md-inline-math .MathJax_SVG .noError { display: none !important; }
.html-for-mac .inline-math-svg .MathJax_SVG { vertical-align: 0.2px; }
.md-math-block .MathJax_SVG_Display { text-align: center; margin: 0px; position: relative; text-indent: 0px; max-width: none; max-height: none; min-height: 0px; min-width: 100%; width: auto; overflow-y: hidden; display: block !important; }
.MathJax_SVG_Display, .md-inline-math .MathJax_SVG_Display { width: auto; margin: inherit; display: inline-block !important; }
.MathJax_SVG .MJX-monospace { font-family: var(--monospace); }
.MathJax_SVG .MJX-sans-serif { font-family: sans-serif; }
.MathJax_SVG { display: inline; font-style: normal; font-weight: 400; line-height: normal; zoom: 90%; text-indent: 0px; text-align: left; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; float: none; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; padding: 0px; margin: 0px; }
.MathJax_SVG * { transition: none 0s ease 0s; }
.MathJax_SVG_Display svg { vertical-align: middle !important; margin-bottom: 0px !important; margin-top: 0px !important; }
.os-windows.monocolor-emoji .md-emoji { font-family: "Segoe UI Symbol", sans-serif; }
.md-diagram-panel > svg { max-width: 100%; }
[lang="flow"] svg, [lang="mermaid"] svg { max-width: 100%; height: auto; }
[lang="mermaid"] .node text { font-size: 1rem; }
table tr th { border-bottom: 0px; }
video { max-width: 100%; display: block; margin: 0px auto; }
iframe { max-width: 100%; width: 100%; border: none; }
.highlight td, .highlight tr { border: 0px; }
svg[id^="mermaidChart"] { line-height: 1em; }
mark { background: rgb(255, 255, 0); color: rgb(0, 0, 0); }
.md-html-inline .md-plain, .md-html-inline strong, mark .md-inline-math, mark strong { color: inherit; }
mark .md-meta { color: rgb(0, 0, 0); opacity: 0.3 !important; }


:root {
    --side-bar-bg-color: #fafafa;
    --control-text-color: #777;
}

@include-when-export url(https://fonts.loli.net/css?family=Open+Sans:400italic,700italic,700,400&subset=latin,latin-ext);

/* open-sans-regular - latin-ext_latin */
  /* open-sans-italic - latin-ext_latin */
    /* open-sans-700 - latin-ext_latin */
    /* open-sans-700italic - latin-ext_latin */
  html {
    font-size: 16px;
}

body {
    font-family: "Open Sans","Clear Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;
    color: rgb(51, 51, 51);
    line-height: 1.6;
}

#write {
    max-width: 860px;
  	margin: 0 auto;
  	padding: 30px;
    padding-bottom: 100px;
}

@media only screen and (min-width: 1400px) {
	#write {
		max-width: 1024px;
	}
}

@media only screen and (min-width: 1800px) {
	#write {
		max-width: 1200px;
	}
}

#write > ul:first-child,
#write > ol:first-child{
    margin-top: 30px;
}

a {
    color: #4183C4;
}
h1,
h2,
h3,
h4,
h5,
h6 {
    position: relative;
    margin-top: 1rem;
    margin-bottom: 1rem;
    font-weight: bold;
    line-height: 1.4;
    cursor: text;
}
h1:hover a.anchor,
h2:hover a.anchor,
h3:hover a.anchor,
h4:hover a.anchor,
h5:hover a.anchor,
h6:hover a.anchor {
    text-decoration: none;
}
h1 tt,
h1 code {
    font-size: inherit;
}
h2 tt,
h2 code {
    font-size: inherit;
}
h3 tt,
h3 code {
    font-size: inherit;
}
h4 tt,
h4 code {
    font-size: inherit;
}
h5 tt,
h5 code {
    font-size: inherit;
}
h6 tt,
h6 code {
    font-size: inherit;
}
h1 {
    padding-bottom: .3em;
    font-size: 2.25em;
    line-height: 1.2;
    border-bottom: 1px solid #eee;
}
h2 {
   padding-bottom: .3em;
    font-size: 1.75em;
    line-height: 1.225;
    border-bottom: 1px solid #eee;
}
h3 {
    font-size: 1.5em;
    line-height: 1.43;
}
h4 {
    font-size: 1.25em;
}
h5 {
    font-size: 1em;
}
h6 {
   font-size: 1em;
    color: #777;
}
p,
blockquote,
ul,
ol,
dl,
table{
    margin: 0.8em 0;
}
li>ol,
li>ul {
    margin: 0 0;
}
hr {
    height: 2px;
    padding: 0;
    margin: 16px 0;
    background-color: #e7e7e7;
    border: 0 none;
    overflow: hidden;
    box-sizing: content-box;
}

li p.first {
    display: inline-block;
}
ul,
ol {
    padding-left: 30px;
}
ul:first-child,
ol:first-child {
    margin-top: 0;
}
ul:last-child,
ol:last-child {
    margin-bottom: 0;
}
blockquote {
    border-left: 4px solid #dfe2e5;
    padding: 0 15px;
    color: #777777;
}
blockquote blockquote {
    padding-right: 0;
}
table {
    padding: 0;
    word-break: initial;
}
table tr {
    border-top: 1px solid #dfe2e5;
    margin: 0;
    padding: 0;
}
table tr:nth-child(2n),
thead {
    background-color: #f8f8f8;
}
table tr th {
    font-weight: bold;
    border: 1px solid #dfe2e5;
    border-bottom: 0;
    margin: 0;
    padding: 6px 13px;
}
table tr td {
    border: 1px solid #dfe2e5;
    margin: 0;
    padding: 6px 13px;
}
table tr th:first-child,
table tr td:first-child {
    margin-top: 0;
}
table tr th:last-child,
table tr td:last-child {
    margin-bottom: 0;
}

.CodeMirror-lines {
    padding-left: 4px;
}

.code-tooltip {
    box-shadow: 0 1px 1px 0 rgba(0,28,36,.3);
    border-top: 1px solid #eef2f2;
}

.md-fences,
code,
tt {
    border: 1px solid #e7eaed;
    background-color: #f8f8f8;
    border-radius: 3px;
    padding: 0;
    padding: 2px 4px 0px 4px;
    font-size: 0.9em;
}

code {
    background-color: #f3f4f4;
    padding: 0 2px 0 2px;
}

.md-fences {
    margin-bottom: 15px;
    margin-top: 15px;
    padding-top: 8px;
    padding-bottom: 6px;
}


.md-task-list-item > input {
  margin-left: -1.3em;
}

@media print {
    html {
        font-size: 13px;
    }
    table,
    pre {
        page-break-inside: avoid;
    }
    pre {
        word-wrap: break-word;
    }
}

.md-fences {
	background-color: #f8f8f8;
}
#write pre.md-meta-block {
	padding: 1rem;
    font-size: 85%;
    line-height: 1.45;
    background-color: #f7f7f7;
    border: 0;
    border-radius: 3px;
    color: #777777;
    margin-top: 0 !important;
}

.mathjax-block>.code-tooltip {
	bottom: .375rem;
}

.md-mathjax-midline {
    background: #fafafa;
}

#write>h3.md-focus:before{
	left: -1.5625rem;
	top: .375rem;
}
#write>h4.md-focus:before{
	left: -1.5625rem;
	top: .285714286rem;
}
#write>h5.md-focus:before{
	left: -1.5625rem;
	top: .285714286rem;
}
#write>h6.md-focus:before{
	left: -1.5625rem;
	top: .285714286rem;
}
.md-image>.md-meta {
    /*border: 1px solid #ddd;*/
    border-radius: 3px;
    padding: 2px 0px 0px 4px;
    font-size: 0.9em;
    color: inherit;
}

.md-tag {
    color: #a7a7a7;
    opacity: 1;
}

.md-toc { 
    margin-top:20px;
    padding-bottom:20px;
}

.sidebar-tabs {
    border-bottom: none;
}

#typora-quick-open {
    border: 1px solid #ddd;
    background-color: #f8f8f8;
}

#typora-quick-open-item {
    background-color: #FAFAFA;
    border-color: #FEFEFE #e5e5e5 #e5e5e5 #eee;
    border-style: solid;
    border-width: 1px;
}

/** focus mode */
.on-focus-mode blockquote {
    border-left-color: rgba(85, 85, 85, 0.12);
}

header, .context-menu, .megamenu-content, footer{
    font-family: "Segoe UI", "Arial", sans-serif;
}

.file-node-content:hover .file-node-icon,
.file-node-content:hover .file-node-open-state{
    visibility: visible;
}

.mac-seamless-mode #typora-sidebar {
    background-color: #fafafa;
    background-color: var(--side-bar-bg-color);
}

.md-lang {
    color: #b4654d;
}

.html-for-mac .context-menu {
    --item-hover-bg-color: #E6F0FE;
}

#md-notification .btn {
    border: 0;
}

.dropdown-menu .divider {
    border-color: #e5e5e5;
}

.ty-preferences .window-content {
    background-color: #fafafa;
}

.ty-preferences .nav-group-item.active {
    color: white;
    background: #999;
}
/*è®¾ç½®æ°´å°*/
.md-fences {
    /*margin-bottom: 15px;
    margin-top: 15px;
    padding: 0.2em 1em;
    padding-top: 8px;
    padding-bottom: 6px;*/
    background-image: url("F:/èµµå®‡ç››/logo.png");
    background-repeat: no-repeat;/*è®¾ç½®Logoå›¾ç‰‡ä¸å¹³é“º*/
    background-position: center center; /*è®¾ç½®Logoå›¾ç‰‡çš„ä½ç½®(æˆ‘è¿™é‡Œè®¾ç½®çš„æ˜¯ä¸­é—´ä½ç½®)*/
    background-size: 200px 80px;/*è®¾ç½®Logoå›¾ç‰‡çš„å¤§å°*/
}
/*å–æ¶ˆé‡å */
.code-tooltip{
	background-image: none;
}
.CodeMirror.cm-s-inner{
	background: transparent !important; 
}


</style>
</head>
<body class='typora-export os-windows' >
<div  id='write'  class = ''><blockquote><p><span>Lectured by HUNG-YI LEE (æå®æ¯…)</span>
<span>Recorded by Yusheng zhaoï¼ˆ</span><a href='mailto:yszhao0717@gmail.com' target='_blank' class='url'>yszhao0717@gmail.com</a><span>ï¼‰</span></p></blockquote><hr /><div class='md-toc' mdtype='toc'><p class="md-toc-content" role="list"><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n138"><a class="md-toc-inner" href="#lecture-5transformer">Lecture 5ï¼šTransformer</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n8"><a class="md-toc-inner" href="#åº”ç”¨åœºæ™¯">åº”ç”¨åœºæ™¯</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n11"><a class="md-toc-inner" href="#tts">TTSï¼š</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n13"><a class="md-toc-inner" href="#seq2seq-for-chatbot">Seq2seq for Chatbotï¼š</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n15"><a class="md-toc-inner" href="#å…¶ä»–nlpåº”ç”¨åœºæ™¯">å…¶ä»–NLPåº”ç”¨åœºæ™¯ï¼š</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n19"><a class="md-toc-inner" href="#seq2seq-for-syntactic-parsing">Seq2seq for Syntactic Parsing</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n23"><a class="md-toc-inner" href="#seq2seq-for-multi-label-classification">Seq2seq for Multi-label Classification</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n27"><a class="md-toc-inner" href="#seq2seq-for-object-detection">Seq2seq for Object Detection</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n29"><a class="md-toc-inner" href="#ç»¼ä¸Š-seq2seqå¾ˆpowerful">ç»¼ä¸Š seq2seqå¾ˆpowerful</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n31"><a class="md-toc-inner" href="#seq2seqçš„å…·ä½“å®ç°">Seq2seqçš„å…·ä½“å®ç°</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n39"><a class="md-toc-inner" href="#encoder"><mark>Encoder</mark></a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n55"><a class="md-toc-inner" href="#decoder"><mark>Decoder</mark></a></span><span role="listitem" class="md-toc-item md-toc-h6" data-ref="n57"><a class="md-toc-inner" href="#æ¯”è¾ƒå¸¸è§çš„ä¸€ç§autoregressiveatï¼‰"><strong>æ¯”è¾ƒå¸¸è§çš„ä¸€ç§ï¼š<mark>Autoregressive</mark>ï¼ˆATï¼‰</strong><span>	</span></a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n97"><a class="md-toc-inner" href="#encoderå’Œdecoderæ˜¯å¦‚ä½•ä¼ è¾“èµ„è®¯çš„å‘¢"><mark>Encoderå’ŒDecoderæ˜¯å¦‚ä½•ä¼ è¾“èµ„è®¯çš„å‘¢ï¼Ÿ</mark></a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n116"><a class="md-toc-inner" href="#è®­ç»ƒseq2seqæ¨¡å‹çš„tips">è®­ç»ƒseq2seqæ¨¡å‹çš„tips</a></span><span role="listitem" class="md-toc-item md-toc-h6" data-ref="n117"><a class="md-toc-inner" href="#ucopy-mechanismu"><u>Copy Mechanism</u></a></span><span role="listitem" class="md-toc-item md-toc-h6" data-ref="n122"><a class="md-toc-inner" href="#uguided-attentionu"><u>Guided Attention</u></a></span><span role="listitem" class="md-toc-item md-toc-h6" data-ref="n130"><a class="md-toc-inner" href="#ubeam-searchué›†æŸæœç´¢"><u>Beam Search</u>ï¼šé›†æŸæœç´¢</a></span></p></div><h3><a name="lecture-5transformer" class="md-header-anchor"></a><span>Lecture 5ï¼šTransformer</span></h3><hr /><blockquote><p><span>transformerå’ŒBERTå¾ˆæœ‰å…³ç³»</span></p></blockquote><p><span>transformerå°±æ˜¯ä¸€ä¸ª</span><strong><em><span>Sequence-to-sequenceï¼ˆSeq2seqï¼‰</span></em></strong><span>çš„æ¨¡å‹ã€‚è¿™é‡Œå¯ä»¥å›é¡¾ä¸‹</span><em><span>Lecture 4</span></em><span>è®²åˆ°çš„è‡´åŠ›äºè§£å†³è¾“å…¥ä¸ºä¸€ç»„å‘é‡çš„æ·±åº¦å­¦ä¹ ä»»åŠ¡çš„åˆ†ç±»ï¼Œå…¶ä¸­</span><em><span>æ¨¡å‹è‡ªå·±å†³å®šlabelçš„æ•°é‡</span></em><span>â€”â€”</span><strong><span>seq2seqä»»åŠ¡</span></strong><span>ï¼ˆInput a sequence, output a sequence, the output length is determined by modelï¼‰</span></p><h4><a name="åº”ç”¨åœºæ™¯" class="md-header-anchor"></a><span>åº”ç”¨åœºæ™¯</span></h4><p><span>ä¸¾ä¾‹æ¥è¯´ï¼Œ</span><em><span>è¯­éŸ³è¯†åˆ«</span></em><span>ã€</span><em><span>æœºå™¨ç¿»è¯‘</span></em><span>ã€</span><em><span>è¯­éŸ³ç¿»è¯‘ï¼ˆä¸–ç•Œæ˜¯è®¸å¤šè¯­è¨€æ²¡æœ‰æ–‡å­—ï¼Œæ‰€ä»¥éœ€è¦ç›´æ¥ä»è¯­éŸ³ç¿»è¯‘ï¼‰</span></em><span>ã€</span><em><span>Text-to-Speechï¼ˆTTSï¼‰Synthesisï¼ˆè¾“å…¥æ–‡å­—ï¼Œè¾“å‡ºè¯­éŸ³ï¼‰</span></em><span>ã€</span><em><span>seq2seq for Chatbotï¼šèŠå¤©æœºå™¨äºº</span></em></p><p><img src="https://s1.328888.xyz/2022/05/03/hiO2T.png" style="zoom:67%;" /></p><h5><a name="tts" class="md-header-anchor"></a><span>TTSï¼š</span></h5><p><img src="https://s1.328888.xyz/2022/05/03/hi1J7.png" style="zoom:67%;" /></p><h5><a name="seq2seq-for-chatbot" class="md-header-anchor"></a><span>Seq2seq for Chatbotï¼š</span></h5><p><img src="https://s1.328888.xyz/2022/05/03/hibzX.png" style="zoom:67%;" /></p><h5><a name="å…¶ä»–nlpåº”ç”¨åœºæ™¯" class="md-header-anchor"></a><span>å…¶ä»–NLPåº”ç”¨åœºæ™¯ï¼š</span></h5><p><img src="https://s1.328888.xyz/2022/05/03/hiFnZ.png" style="zoom:67%;" /></p><p><span>é—®é¢˜ï¼Œæ–‡ç« ==&gt;ç­”æ¡ˆã€‚å‚è€ƒå®ä¾‹ï¼š</span><a href='https://arxiv.org/abs/1806.08730'><span>æ–‡ç« 1</span></a><span>ã€</span><a href='https://arxiv.org/abs/1909.03329'><span>æ–‡ç« 2</span></a></p><p><span>å¼ºè°ƒä¸€ä¸‹ï¼šå¯¹äºå¤šæ•°çš„NLPé—®é¢˜æˆ–å¯¹å¤šæ•°çš„è¯­éŸ³ç›¸å…³çš„ä»»åŠ¡è€Œè¨€ï¼Œå¾€å¾€ä¸ºè¿™äº›ä»»åŠ¡</span><strong><span>å®¢åˆ¶åŒ–æ¨¡å‹</span></strong><span>ï¼Œä¼šå¾—åˆ°æ›´å¥½çš„ç»“æœã€‚ä¸¾ä¾‹æ¥è¯´ï¼ŒGoogleçš„pixel4ç”¨çš„N to Nçš„networkç”¨äº†ä¸€ä¸ªRNN transducerçš„modelæ¥å®Œæˆè¯­éŸ³è¯†åˆ«ä»»åŠ¡ï¼Œæ¨¡å‹è®¾è®¡é’ˆå¯¹äº†è¯­éŸ³çš„ç‰¹æ€§ï¼Œé‚£ä¹ˆå¯¹äºç›¸å…³è¯­éŸ³ä»»åŠ¡è¡¨ç°ä¼šæ›´å¥½ã€‚</span></p><h5><a name="seq2seq-for-syntactic-parsing" class="md-header-anchor"></a><span>Seq2seq for Syntactic Parsing</span></h5><p><span>æ–‡æ³•å‰–æä»»åŠ¡ï¼Œè¾“å…¥ä¸€æ®µsequenceï¼Œè¾“å‡ºä¸€ä¸ªæ–‡æ³•å‰–ææ ‘</span></p><p><img src="https://s1.328888.xyz/2022/05/03/hiZeC.png" style="zoom:67%;" /></p><p><span>ä¸€ç¯‡æ–‡ç« </span><a href='https://arxiv.org/abs/1412.7449'><span>grammar as a foreign language</span></a><span>ä»‹ç»äº†è¿™ä¸ªåšæ³•ã€‚ç”¨åŸæ¥åªç”¨åœ¨ç¿»è¯‘çš„Seq2seqçš„modelæ¥åšæ–‡æ³•å‰–æï¼ˆæ•…åä¸ºæ–‡æ³•å½“ä½œå¦ä¸€é—¨â€œè¯­è¨€â€ï¼Œæ‰€ä»¥æ˜¯ç¡¬ç”¨seq2seqï¼‰</span></p><h5><a name="seq2seq-for-multi-label-classification" class="md-header-anchor"></a><span>Seq2seq for Multi-label Classification</span></h5><p><span>Multi-label Classificationï¼šåŒä¸€ä¸ªä¸œè¥¿å¯ä»¥å±äºå¤šä¸ªclassã€‚</span></p><p><span>ç”±äºæ¯ä¸ªä¸œè¥¿å¯èƒ½æ‰€å±ç±»çš„æ•°é‡ç§ç±»æœ‰æ‰€ä¸åŒï¼Œæ‰€ä»¥å¦‚æœåªæ˜¯è®¾ç½®ä¸€ä¸ªthresholdï¼ˆæ¯”æ–¹è¯´å–å‰ä¸‰åï¼‰æ•ˆæœå¯èƒ½éå¸¸ä¸å¥½ã€‚ç„¶è€Œè¿™é‡Œå¯ä»¥ç”¨seq2seqç¡¬åšï¼Œæœºå™¨è‡ªå·±å†³å®šè¾“å‡ºå‡ ä¸ªclassã€‚</span></p><p><span>å‚è€ƒå®ä¾‹ï¼š</span><a href='https://arxiv.org/abs/1909.03434'><span>æ–‡ç« 1</span></a><span>ã€</span><a href='https://arxiv.org/abs/1707.05495'><span>æ–‡ç« 2</span></a></p><h5><a name="seq2seq-for-object-detection" class="md-header-anchor"></a><span>Seq2seq for Object Detection</span></h5><p><a href='https://arxiv.org/abs/2005.12872'><span>å‚è€ƒæ–‡ç« </span></a></p><h5><a name="ç»¼ä¸Š-seq2seqå¾ˆpowerful" class="md-header-anchor"></a><span>ç»¼ä¸Š seq2seqå¾ˆpowerful</span></h5><hr /><h4><a name="seq2seqçš„å…·ä½“å®ç°" class="md-header-anchor"></a><span>Seq2seqçš„å…·ä½“å®ç°</span></h4><p><img src="https://s1.328888.xyz/2022/05/03/hijDg.png" style="zoom:67%;" /></p><p><span>å¦‚ä¸Šå›¾ï¼ŒæŠŠè¾“å…¥sequenceä¸¢è¿›</span><strong><span>Encoder</span></strong><span>ï¼Œç„¶åå†æ‰”è¿›</span><strong><span>Decoder</span></strong><span>ï¼Œç”±Decoderå†³å®šè¾“å‡ºä»€ä¹ˆæ ·çš„sequenceã€‚ä¹‹åä¼šç»†è®²Encoderå’ŒDecoderçš„å†…éƒ¨æ¶æ„ã€‚</span></p><p><span>ç»å…¸çš„</span><a href='https://arxiv.org/abs/1409.3215'><span>seq2seq</span></a><span>æ¶æ„ğŸ‘‡</span></p><p><img src="https://s1.328888.xyz/2022/05/03/hivw1.png" style="zoom:67%;" /></p><p><span>è¿™èŠ‚çš„ä¸»è§’</span><a href='https://arxiv.org/abs/1706.03762'><span>Transformer</span></a><span>ğŸ‘‡</span></p><p><img src="https://s1.328888.xyz/2022/05/03/hi6Bt.png" style="zoom:67%;" /></p><hr /><h5><a name="encoder" class="md-header-anchor"></a><mark><span>Encoder</span></mark></h5><p><span>ä½œç”¨ï¼šinputä¸€æ’å‘é‡è¾“å‡ºå¦å¤–ä¸€æ’å‘é‡ã€‚ä¸Šä¸€ä¸ª</span><em><span>lecture</span></em><span>è®²çš„self-attentionä»¥åŠä¹‹å‰çš„RNNå’ŒCNNéƒ½èƒ½åšåˆ°ï¼Œè€Œåœ¨</span><strong><span>Transformeré‡Œé¢çš„Encoderç”¨çš„æ˜¯self-attention</span></strong><span>ã€‚</span></p><p><img src="https://s1.328888.xyz/2022/05/03/hiN8e.png" style="zoom:67%;" /></p><p><span>æŠŠEncoderå†…éƒ¨è‚¢è§£å‡ºæ¥ï¼Œåœ¨Transformeré‡Œé¢ğŸ‘‡</span></p><p><img src="https://s1.328888.xyz/2022/05/03/hiSIO.png" style="zoom:67%;" /></p><p><span>Encoderçš„å…³é”®æ˜¯è®¸å¤šä¸ªBlockï¼Œæ¯ä¸ªBlockæœ‰å¥½å‡ ä¸ªLayeråœ¨å·¥ä½œï¼Œæ¯ä¸ªBlockæ•´åˆäº†ä¸€ç³»åˆ—çš„æ“ä½œï¼ˆself-attention + FCï¼‰ï¼šé¦–å…ˆæ˜¯è¾“å…¥è¿›self-attentionä»¥è€ƒè™‘åˆ°æ•´ä¸ªsequenceçš„èµ„è®¯ï¼Œoutputå¦å¤–ä¸€æ’vectorï¼›ç„¶åæŠŠè¿™æ’vectorå†ä¸¢è¿›fully connectedçš„feed forward networké‡Œé¢ï¼Œå†outputå¦å¤–ä¸€æ’vectorâ€”â€”å³Blockçš„è¾“å‡ºã€‚</span></p><p><span>åœ¨åŸæ¥çš„Transformeré‡Œé¢ï¼Œåšçš„äº‹æƒ…æ›´å¤æ‚ï¼š</span></p><p><img src="https://s1.328888.xyz/2022/05/03/hiovq.png" style="zoom:60%;" /></p><p><span>åœ¨Transformeré‡Œé¢ï¼Œåœ¨è¾“å‡ºçš„vectorè¿˜è¦åŠ ä¸Šå¯¹åº”çš„inputï¼ŒåŒ…å«è¿™ç§å½¢å¼çš„æ¶æ„ç§°ä¹‹ä¸º</span><strong><span>Residual connection</span></strong><span>ï¼›æ¥ç€æŠŠç»“æœåš</span><strong><span>Layer normalization</span></strong><span>ï¼ˆç›¸è¾ƒäºbatch normalizationæ›´ç®€å•äº›ï¼‰ã€‚è¿™ä¸ªè¾“å‡ºæ‰æ˜¯FCçš„è¾“å…¥ï¼Œç„¶åå†åšä¸€æ¬¡residual connectionå’Œlayer normalizationã€‚</span></p><p><img src="https://s1.328888.xyz/2022/05/03/hiEJP.png" style="zoom:67%;" /></p><p><span>ä¸Šå›¾ä¸­çš„</span><strong><span>Add &amp; Norm</span></strong><span>å°±æ˜¯</span><strong><span>residual connectionåŠ ä¸Šlayer normalization</span></strong><span>ï¼›Positonal Encodingå’ŒMulti-Head Attentionä¹‹å‰è®²è¿‡ã€‚</span></p><p><span>BERTå…¶å®å°±æ˜¯Transformerçš„Encoderã€‚</span></p><p><span>ä¸Šè¿°æ˜¯åŸå§‹è®ºæ–‡çš„Transformerè®¾è®¡ï¼Œç›¸å…³çš„æ·±å…¥æ¢è®¨ï¼š</span><a href='https://arxiv.org/abs/2002.04745'><span>On Layer Normalization in the Transformer Architecture</span></a><span>ã€</span><a href='https://arxiv.org/abs/2003.07845'><span>PowerNorm: Rethinking Batch Normalization in Transformers</span></a></p><p><img src="https://s1.328888.xyz/2022/05/03/hiPzm.png" style="zoom:50%;" /></p><p><span>ä¹Ÿæœ‰Transformerçš„é­”æ”¹ç‰ˆæœ¬ï¼š(a)æ˜¯åŸå§‹çš„ï¼Œ(b)æ˜¯å…¶ä¸­ä¸€ä¸ªé­”æ”¹ï¼ˆæ›´æ¢äº†Layer Normé¡ºåº...ï¼‰</span></p><hr /><h5><a name="decoder" class="md-header-anchor"></a><mark><span>Decoder</span></mark></h5><p><span>Decoderå…¶å®æœ‰ä¸¤ç§</span></p><h6><a name="æ¯”è¾ƒå¸¸è§çš„ä¸€ç§autoregressiveatï¼‰" class="md-header-anchor"></a><strong><span>æ¯”è¾ƒå¸¸è§çš„ä¸€ç§ï¼š</span><mark><span>Autoregressive</span></mark><span>ï¼ˆATï¼‰</span></strong><span>	</span></h6><blockquote><p><span>Speech Recognitionï¼ˆè¾“å…¥ä¸€æ®µå£°éŸ³ï¼Œè¾“å‡ºä¸€æ®µæ–‡å­—ï¼‰ as exampleï¼Œè¯´æ˜ATå¦‚ä½•è¿ä½œ</span></p></blockquote><p><span>Decoderè¯»å…¥Encoderçš„è¾“å‡ºï¼ˆæŸç§æ–¹æ³•ï¼‰ï¼Œäº§ç”Ÿè¯­éŸ³è¯†åˆ«çš„ç»“æœã€‚Decoderå¦‚ä½•äº§ç”Ÿä¸€æ®µæ–‡å­—ï¼Ÿ</span></p><ul><li><p><span>é¦–å…ˆè¦å…ˆç»™ä»–ä¸€ä¸ªç‰¹æ®Šçš„ç¬¦å·</span><code>START(special token)</code><span>ï¼Œä»£è¡¨start of sentenceã€‚åœ¨Decoderå¯èƒ½äº§ç”Ÿçš„ä¸€æ®µæ–‡å­—å¼€å¤´åŠ ä¸Šä¸€ä¸ªç‰¹æ®Šçš„ç¬¦å·ï¼ˆå­—ï¼‰ï¼Œå°±ä»£è¡¨äº†å¼€å§‹è¿™ä¸ªäº‹æƒ…ã€‚æ¯ä¸€ä¸ª</span><code>token</code><span>éƒ½å¯ä»¥æŠŠå®ƒå½“ä½œä¸€ä¸ª</span><code>One-hot</code><span>çš„vectorï¼ˆä¸€ç»´æ˜¯1å…¶ä»–æ˜¯0ï¼‰ï¼ŒDecoderåå‡ºä¸€ä¸ªé•¿åº¦å¾ˆé•¿çš„å‘é‡ï¼ˆå’ŒVocabularyçš„å¤§å°ä¸€æ ·ã€å–å†³äºé¢„è®¡è¾“å‡ºçš„æ–‡å­—å½¢å¼ã€‘ï¼‰å¯ä»¥ç”¨subwordä»£è¡¨è‹±è¯­ï¼ˆå¦‚æœç”¨è¯æ±‡é‚£éœ€è¦çš„ç»´æ•°å¤ªå¤šäº†ï¼‰ï¼Œç”¨æ–¹å—æ±‰å­—ä»£è¡¨ä¸­æ–‡ï¼ˆå¸¸ç”¨çš„ä¸è¿‡ä¸‰å››åƒï¼‰ã€‚</span></p><p><img src="https://s1.328888.xyz/2022/05/03/hix1A.png" style="zoom:67%;" /></p><p><span>ç”±äºDecoderçš„åˆå§‹è¾“å‡ºè¦ç»è¿‡</span><code>softmax</code><span>å¤„ç†ï¼Œæ‰€ä»¥è¿™ä¸ªå‘é‡é‡Œé¢çš„å€¼æ˜¯ä¸€ä¸ªdistributionï¼Œå‘é‡çš„å€¼åŠ èµ·æ¥æ€»å’Œä¸º1ï¼Œé€‰æ‹©åˆ†æ•°æœ€é«˜çš„è¾“å‡ºã€‚ç„¶åæŠŠè¿™ä¸ªè¾“å‡ºå½“ä½œç¬¬äºŒä¸ªtokenè¾“å…¥ï¼Œä»¥æ­¤ç±»æ¨ï¼š</span></p><p><img src="https://s1.328888.xyz/2022/05/03/hryBv.png" style="zoom:67%;" /></p><p><span>æŠŠå‰é¢çš„è¾“å‡ºå½“ä½œä¸‹ä¸€ä¸ªè¾“å…¥ï¼Œå†å‚ç…§ä¹‹å‰çš„è¾“å…¥å¾—åˆ°ç›¸åº”çš„è¾“å‡ºã€‚å› ä¸ºå®ƒåªèƒ½çœ‹åˆ°çš„æ˜¯è‡ªå·±çš„è¾“å‡ºï¼Œå¦‚æœå…¶ä¸­ä¸€æ­¥æœ‰é”™è¯¯ï¼Œè€Œé”™è¯¯çš„è¾“å‡ºè¢«è¾“å…¥è¿›Decoderï¼Œæ‰€ä»¥å¯èƒ½ä¼šäº§ç”Ÿä¸€è¿è´¯é”™è¯¯ã€‚</span><strong><span>Error Propagationï¼ˆä¸€æ­¥é”™ï¼Œæ­¥æ­¥é”™ï¼‰</span></strong><span>ã€‚è¿™ä¸ªé—®é¢˜ä¹‹åå†è®¨è®ºã€‚</span></p><p><span>ç°åœ¨æŠŠEncoderçš„éƒ¨åˆ†çœç•¥æ‰ï¼Œç•™ä¸‹Decoderï¼Œ</span><strong><span>Decoderçš„å†…éƒ¨ç»“æ„é•¿ä»€ä¹ˆæ ·ï¼Ÿ</span></strong><span>ï¼ˆä»¥Transformerä¸ºä¾‹ï¼Œæ¯”Encoderå¤æ‚å¤šäº†ğŸ˜¢ï¼‰</span></p><p><img src="https://s1.328888.xyz/2022/05/03/hreDR.png" style="zoom:67%;" /></p><p><span> é™¤äº†ä¸­é—´ä¸€å—é©¬èµ›å…‹éƒ¨åˆ†ï¼Œå…¶å®Encoderå’ŒDecoderå·®åˆ«ä¸æ˜¯å¾ˆå¤§ğŸ‘‡</span></p><p><img src="https://s1.328888.xyz/2022/05/03/hru3i.png" style="zoom:67%;" /></p><p><span>åœ¨Decoderè¿™è¾¹è¾“å‡ºå¤šäº†</span><code>softmax</code><span>éƒ¨åˆ†ï¼Œè€Œåœ¨Blocksé‡Œé¢ä¸ä¸€æ ·çš„æ˜¯</span><strong><span>Masked Multi-Head Attention</span></strong><span>ï¼›å›é¡¾ä¸€ä¸‹</span><strong><span>self-attention</span></strong><span>ï¼šæ¯ä¸ªoutputéƒ½ä¼šè€ƒè™‘æ‰€æœ‰çš„inputï¼›è€Œ</span><strong><span>Masked Self-attention</span></strong><span>ï¼šæ¯ä¸ªoutputåªè€ƒè™‘ç›¸å¯¹ä¹‹åçš„inputã€‚</span></p><p><img src="https://s1.328888.xyz/2022/05/03/hrg80.png" style="zoom:67%;" /></p><p><span>å¦‚ğŸ‘‡å›¾æ‰€ç¤ºï¼š</span></p><p><img src="https://s1.328888.xyz/2022/05/03/hr9RJ.png" style="zoom:67%;" /></p><p><span>ä¸ºä»€ä¹ˆè¦maskedå‘¢ï¼ŸåŸå› å¾ˆç›´è§‰â€”â€”å®ƒçš„è¾“å…¥æ˜¯ä¸€ä¸ªä¸€ä¸ªæ‰“è¿›å»çš„ï¼ˆè€Œéå¹¶è¡Œè¾“å…¥ï¼‰ã€‚</span></p><p><strong><span>æœ‰ä¸€ä¸ªå…³é”®çš„é—®é¢˜æ˜¯â€”â€”Decoderå¿…é¡»è‡ªå·±å†³å®šè¾“å‡ºçš„sequenceçš„é•¿åº¦ã€‚</span></strong><span>é‚£ä¹ˆDecoderå¦‚ä½•å†³å®šä»€ä¹ˆæ—¶å€™è¾“å‡ºsequenceçš„æˆªæ­¢ï¼Ÿç­”æ¡ˆæ˜¯Decoderéœ€è¦è®¾è®¡ä¸€ä¸ªç‰¹åˆ«çš„ç¬¦å·ï¼šæ–­ï¼ˆENDï¼‰æ¥è¡¨ç¤ºï¼Œè¿™ä¸ªå°±æ˜¯</span><strong><span>â€Stop Tokenâ€œ</span></strong><span>ã€‚</span></p><p><img src="https://s1.328888.xyz/2022/05/03/hrXLW.png" style="zoom:67%;" /></p><p><span>æœ‰å§‹å¿…æœ‰ç»ˆï¼ˆStartâ€”Endï¼‰ï¼Œç¨‹åºä¸­ä¹Ÿå¯ä»¥ä¸¤è€…ä½œä¸ºåŒä¸€ç§ç¬¦å·ï¼Œåªä¸è¿‡ä¸€ä¸ªsequenceå¼€å§‹è¾“å‡ºï¼Œå¦ä¸€ä¸ªsequenceç»“æŸè¾“å‡ºï¼Œä¹Ÿæ˜¯æ²¡æœ‰é—®é¢˜çš„ã€‚æ•´ä¸ªæµç¨‹çš„æè¿°ï¼šDecoderçœ‹åˆ°äº†Encoderçš„embeddingä»¥åŠçœ‹åˆ°äº†Beginå’Œè‡ªå·±ä¹‹åçš„æ»åçš„è¾“å…¥ï¼Œå°±çŸ¥é“è¯†åˆ«ç»“æŸï¼Œè¾“å‡ºä¸€ä¸ªENDç¬¦å·ï¼ˆå³ENDç¬¦å·çš„æœºç‡å¿…é¡»æœ€å¤§ï¼‰ã€‚</span></p><h6><a name="decoder---non-autoregressivenatï¼‰" class="md-header-anchor"></a><strong><span>Decoderâ€”Non-autoregressiveï¼ˆNATï¼‰</span></strong></h6><p><span>è¿™ä¸ªmodelä»¥ä¸‹ç®€å•ä»‹ç»ä¸‹ã€‚</span></p><p><img src="https://s1.328888.xyz/2022/05/03/hrfCy.png" style="zoom:67%;" /></p><p><span>NATä¸åƒæ˜¯ATï¼Œä¸€ä¸ªä¸€ä¸ªè¾“å‡ºï¼Œè€Œæ˜¯æŠŠæ•´ä¸ªå¥å­éƒ½äº§ç”Ÿå‡ºæ¥ã€‚NATçš„Decoderåƒè¿›å»ä¸€æ’STARTçš„Tokenï¼Œåªè¦ä¸€ä¸ªæ­¥éª¤å°±å¯ä»¥å®Œæˆå¥å­çš„ç”Ÿæˆã€‚</span></p><ul><li><span>é‚£ä¹ˆï¼Œå¦‚ä½•å†³å®šNAT decoderçš„è¾“å‡ºé•¿åº¦å‘¢ï¼Ÿ</span></li></ul><p><span>1ã€å¦å¤–åšä¸€ä¸ªpredictorï¼Œæ¥é¢„æµ‹è¾“å‡ºé•¿åº¦ï¼šå¯ä»¥æ˜¯ä¸€ä¸ªclassifierï¼ŒæŠŠdecoderçš„è¾“å‡ºæ‰”è¿›å»ï¼Œç„¶åé¢„æµ‹å‡ºä¸€ä¸ªæ•°å­—â€”â€”å†³å®šäº†æœ‰å‡ ä¸ªstart tokenæ‰“è¿›å»ã€‚</span></p><p><span>2ã€Output a very long sequenceï¼Œignore tokens after ENDï¼›ä¸ç®¡ä¸‰ä¸ƒäºŒåä¸€ï¼Œè¾“å‡ºè¶³å¤Ÿå¤šçš„start tokenï¼Œåœ¨å†—ä½™çš„è¾“å‡ºä¸­æ‰¾åˆ°ENDç‰¹æ®Šå­—ç¬¦ï¼ˆdtop tokenï¼‰æˆªå–å·¦è¾¹ä½œä¸ºæœ‰æ•ˆè¾“å‡ºã€‚ç»“æŸã€‚</span></p><ul><li><p><span>NATçš„decoderæœ‰ä»€ä¹ˆæ ·çš„å¥½å¤„å‘¢ï¼Ÿ</span></p><p><span>1ã€å¹¶è¡ŒåŒ–ï¼ˆATæ˜¯ä¸²è¡Œçš„ï¼Œæ‰€ä»¥NATdecoderé€Ÿåº¦æ›´å¿«ï¼‰â€™</span></p><p><span>2ã€ç›¸è¾ƒäºATæ›´èƒ½å¤Ÿæ§åˆ¶å®ƒè¾“å‡ºçš„é•¿åº¦ï¼šå› ä¸ºç”±ä¸Šæˆ‘ä»¬ç»å¸¸ä½¿ç”¨ä¸€ä¸ªclassifieræ¥å†³å®šè¾“å‡ºé•¿åº¦ï¼Œåœ¨ä¸€äº›ä»»åŠ¡ä¸­ï¼ˆä¾‹å¦‚è¯­éŸ³è¯†åˆ«ï¼‰ï¼Œå¯ä»¥classifierçš„outputé™¤ä»¥2ï¼Œé€Ÿåº¦å°±å˜å¿«2å€ã€‚</span></p></li><li><p><span>NATé€šå¸¸è¡¨ç°ä¸å¦‚ATï¼ˆWhyï¼Ÿ</span><strong><span>Multi-modality</span></strong><span>ï¼‰</span></p></li></ul></li></ul><hr /><h5><a name="encoderå’Œdecoderæ˜¯å¦‚ä½•ä¼ è¾“èµ„è®¯çš„å‘¢" class="md-header-anchor"></a><mark><span>Encoderå’ŒDecoderæ˜¯å¦‚ä½•ä¼ è¾“èµ„è®¯çš„å‘¢ï¼Ÿ</span></mark></h5><p><span>æ–¹æ‰æ¯”è¾ƒEncoderå’ŒDecoderçš„ç»“æ„æ—¶ï¼ŒDecoderè¢«é©¬èµ›å…‹çš„ä¸€å—ğŸ‘‡</span></p><p><img src="https://s1.328888.xyz/2022/05/03/hri1k.png" style="zoom:67%;" /></p><p><span>è¿™ä¸ªç»“æ„ç§°ä¹‹ä¸º</span><mark><strong><span>Cross Attention</span></strong></mark><span>ã€‚è¿™ä¸ªæ¨¡ç»„å®é™…ä¸Šæ˜¯å¦‚ä¸‹è¿ä½œçš„ï¼š</span></p><p><span>Decoderä¼šå…ˆè¯»è¿›startçš„ä¸€ä¸ªtokenï¼Œå…¶ä¸­çš„self-attentionæ˜¯maskçš„ï¼Œå¾—åˆ°ä¸€ä¸ªå‘é‡ï¼Œåštransformï¼Œä¹˜ä»¥ä¸€ä¸ªçŸ©é˜µ</span><span class="MathJax_SVG" tabindex="-1" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="3.18ex" height="2.577ex" viewBox="0 -755.9 1369.3 1109.7" role="img" focusable="false" style="vertical-align: -0.822ex;"><defs><path stroke-width="0" id="E1-MJMATHI-57" d="M436 683Q450 683 486 682T553 680Q604 680 638 681T677 682Q695 682 695 674Q695 670 692 659Q687 641 683 639T661 637Q636 636 621 632T600 624T597 615Q597 603 613 377T629 138L631 141Q633 144 637 151T649 170T666 200T690 241T720 295T759 362Q863 546 877 572T892 604Q892 619 873 628T831 637Q817 637 817 647Q817 650 819 660Q823 676 825 679T839 682Q842 682 856 682T895 682T949 681Q1015 681 1034 683Q1048 683 1048 672Q1048 666 1045 655T1038 640T1028 637Q1006 637 988 631T958 617T939 600T927 584L923 578L754 282Q586 -14 585 -15Q579 -22 561 -22Q546 -22 542 -17Q539 -14 523 229T506 480L494 462Q472 425 366 239Q222 -13 220 -15T215 -19Q210 -22 197 -22Q178 -22 176 -15Q176 -12 154 304T131 622Q129 631 121 633T82 637H58Q51 644 51 648Q52 671 64 683H76Q118 680 176 680Q301 680 313 683H323Q329 677 329 674T327 656Q322 641 318 637H297Q236 634 232 620Q262 160 266 136L501 550L499 587Q496 629 489 632Q483 636 447 637Q428 637 422 639T416 648Q416 650 418 660Q419 664 420 669T421 676T424 680T428 682T436 683Z"></path><path stroke-width="0" id="E1-MJMATHI-71" d="M33 157Q33 258 109 349T280 441Q340 441 372 389Q373 390 377 395T388 406T404 418Q438 442 450 442Q454 442 457 439T460 434Q460 425 391 149Q320 -135 320 -139Q320 -147 365 -148H390Q396 -156 396 -157T393 -175Q389 -188 383 -194H370Q339 -192 262 -192Q234 -192 211 -192T174 -192T157 -193Q143 -193 143 -185Q143 -182 145 -170Q149 -154 152 -151T172 -148Q220 -148 230 -141Q238 -136 258 -53T279 32Q279 33 272 29Q224 -10 172 -10Q117 -10 75 30T33 157ZM352 326Q329 405 277 405Q242 405 210 374T160 293Q131 214 119 129Q119 126 119 118T118 106Q118 61 136 44T179 26Q233 26 290 98L298 109L352 326Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="#E1-MJMATHI-57" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="#E1-MJMATHI-71" x="1335" y="-213"></use></g></svg></span><script type="math/tex">W_q</script><span>å¾—åˆ°ä¸€ä¸ª</span><span class="MathJax_SVG" tabindex="-1" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.068ex" height="1.76ex" viewBox="0 -504.6 460 757.9" role="img" focusable="false" style="vertical-align: -0.588ex;"><defs><path stroke-width="0" id="E5-MJMATHI-71" d="M33 157Q33 258 109 349T280 441Q340 441 372 389Q373 390 377 395T388 406T404 418Q438 442 450 442Q454 442 457 439T460 434Q460 425 391 149Q320 -135 320 -139Q320 -147 365 -148H390Q396 -156 396 -157T393 -175Q389 -188 383 -194H370Q339 -192 262 -192Q234 -192 211 -192T174 -192T157 -193Q143 -193 143 -185Q143 -182 145 -170Q149 -154 152 -151T172 -148Q220 -148 230 -141Q238 -136 258 -53T279 32Q279 33 272 29Q224 -10 172 -10Q117 -10 75 30T33 157ZM352 326Q329 405 277 405Q242 405 210 374T160 293Q131 214 119 129Q119 126 119 118T118 106Q118 61 136 44T179 26Q233 26 290 98L298 109L352 326Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="#E5-MJMATHI-71" x="0" y="0"></use></g></svg></span><script type="math/tex">q</script><span>ã€‚åŒæ—¶Encoderä¼šä¾ç…§self-attentionäº§ç”Ÿ</span><span class="MathJax_SVG" tabindex="-1" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="8.027ex" height="2.694ex" viewBox="0 -906.7 3456.2 1160" role="img" focusable="false" style="vertical-align: -0.588ex;"><defs><path stroke-width="0" id="E3-MJMATHI-61" d="M33 157Q33 258 109 349T280 441Q331 441 370 392Q386 422 416 422Q429 422 439 414T449 394Q449 381 412 234T374 68Q374 43 381 35T402 26Q411 27 422 35Q443 55 463 131Q469 151 473 152Q475 153 483 153H487Q506 153 506 144Q506 138 501 117T481 63T449 13Q436 0 417 -8Q409 -10 393 -10Q359 -10 336 5T306 36L300 51Q299 52 296 50Q294 48 292 46Q233 -10 172 -10Q117 -10 75 30T33 157ZM351 328Q351 334 346 350T323 385T277 405Q242 405 210 374T160 293Q131 214 119 129Q119 126 119 118T118 106Q118 61 136 44T179 26Q217 26 254 59T298 110Q300 114 325 217T351 328Z"></path><path stroke-width="0" id="E3-MJMATHI-69" d="M184 600Q184 624 203 642T247 661Q265 661 277 649T290 619Q290 596 270 577T226 557Q211 557 198 567T184 600ZM21 287Q21 295 30 318T54 369T98 420T158 442Q197 442 223 419T250 357Q250 340 236 301T196 196T154 83Q149 61 149 51Q149 26 166 26Q175 26 185 29T208 43T235 78T260 137Q263 149 265 151T282 153Q302 153 302 143Q302 135 293 112T268 61T223 11T161 -11Q129 -11 102 10T74 74Q74 91 79 106T122 220Q160 321 166 341T173 380Q173 404 156 404H154Q124 404 99 371T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Z"></path><path stroke-width="0" id="E3-MJMAIN-2C" d="M78 35T78 60T94 103T137 121Q165 121 187 96T210 8Q210 -27 201 -60T180 -117T154 -158T130 -185T117 -194Q113 -194 104 -185T95 -172Q95 -168 106 -156T131 -126T157 -76T173 -3V9L172 8Q170 7 167 6T161 3T152 1T140 0Q113 0 96 17Z"></path><path stroke-width="0" id="E3-MJMATHI-6B" d="M121 647Q121 657 125 670T137 683Q138 683 209 688T282 694Q294 694 294 686Q294 679 244 477Q194 279 194 272Q213 282 223 291Q247 309 292 354T362 415Q402 442 438 442Q468 442 485 423T503 369Q503 344 496 327T477 302T456 291T438 288Q418 288 406 299T394 328Q394 353 410 369T442 390L458 393Q446 405 434 405H430Q398 402 367 380T294 316T228 255Q230 254 243 252T267 246T293 238T320 224T342 206T359 180T365 147Q365 130 360 106T354 66Q354 26 381 26Q429 26 459 145Q461 153 479 153H483Q499 153 499 144Q499 139 496 130Q455 -11 378 -11Q333 -11 305 15T277 90Q277 108 280 121T283 145Q283 167 269 183T234 206T200 217T182 220H180Q168 178 159 139T145 81T136 44T129 20T122 7T111 -2Q98 -11 83 -11Q66 -11 57 -1T48 16Q48 26 85 176T158 471L195 616Q196 629 188 632T149 637H144Q134 637 131 637T124 640T121 647Z"></path><path stroke-width="0" id="E3-MJMATHI-76" d="M173 380Q173 405 154 405Q130 405 104 376T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Q21 294 29 316T53 368T97 419T160 441Q202 441 225 417T249 361Q249 344 246 335Q246 329 231 291T200 202T182 113Q182 86 187 69Q200 26 250 26Q287 26 319 60T369 139T398 222T409 277Q409 300 401 317T383 343T365 361T357 383Q357 405 376 424T417 443Q436 443 451 425T467 367Q467 340 455 284T418 159T347 40T241 -11Q177 -11 139 22Q102 54 102 117Q102 148 110 181T151 298Q173 362 173 380Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="#E3-MJMATHI-61" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="#E3-MJMATHI-69" x="748" y="513"></use><use xlink:href="#E3-MJMAIN-2C" x="872" y="0"></use><g transform="translate(1317,0)"><use xlink:href="#E3-MJMATHI-6B" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="#E3-MJMATHI-69" x="736" y="513"></use></g><use xlink:href="#E3-MJMAIN-2C" x="2182" y="0"></use><g transform="translate(2627,0)"><use xlink:href="#E3-MJMATHI-76" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="#E3-MJMATHI-69" x="685" y="513"></use></g></g></svg></span><script type="math/tex">a^i,k^i,v^i</script><span>ç”±æ­¤è®¡ç®—å¾—åˆ°</span><span class="MathJax_SVG" tabindex="-1" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="2.285ex" height="1.76ex" viewBox="0 -504.6 984 757.9" role="img" focusable="false" style="vertical-align: -0.588ex;"><defs><path stroke-width="0" id="E4-MJMATHI-3B1" d="M34 156Q34 270 120 356T309 442Q379 442 421 402T478 304Q484 275 485 237V208Q534 282 560 374Q564 388 566 390T582 393Q603 393 603 385Q603 376 594 346T558 261T497 161L486 147L487 123Q489 67 495 47T514 26Q528 28 540 37T557 60Q559 67 562 68T577 70Q597 70 597 62Q597 56 591 43Q579 19 556 5T512 -10H505Q438 -10 414 62L411 69L400 61Q390 53 370 41T325 18T267 -2T203 -11Q124 -11 79 39T34 156ZM208 26Q257 26 306 47T379 90L403 112Q401 255 396 290Q382 405 304 405Q235 405 183 332Q156 292 139 224T121 120Q121 71 146 49T208 26Z"></path><path stroke-width="0" id="E4-MJMATHI-69" d="M184 600Q184 624 203 642T247 661Q265 661 277 649T290 619Q290 596 270 577T226 557Q211 557 198 567T184 600ZM21 287Q21 295 30 318T54 369T98 420T158 442Q197 442 223 419T250 357Q250 340 236 301T196 196T154 83Q149 61 149 51Q149 26 166 26Q175 26 185 29T208 43T235 78T260 137Q263 149 265 151T282 153Q302 153 302 143Q302 135 293 112T268 61T223 11T161 -11Q129 -11 102 10T74 74Q74 91 79 106T122 220Q160 321 166 341T173 380Q173 404 156 404H154Q124 404 99 371T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="#E4-MJMATHI-3B1" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="#E4-MJMATHI-69" x="905" y="-213"></use></g></svg></span><script type="math/tex">\alpha_i</script><span>ã€‚è¿™ä¸ªæ­¥éª¤ç§°ä¹‹ä¸º</span><strong><span>Cross Attention</span></strong><span>ã€‚ï¼ˆ</span><span class="MathJax_SVG" tabindex="-1" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.068ex" height="1.76ex" viewBox="0 -504.6 460 757.9" role="img" focusable="false" style="vertical-align: -0.588ex;"><defs><path stroke-width="0" id="E5-MJMATHI-71" d="M33 157Q33 258 109 349T280 441Q340 441 372 389Q373 390 377 395T388 406T404 418Q438 442 450 442Q454 442 457 439T460 434Q460 425 391 149Q320 -135 320 -139Q320 -147 365 -148H390Q396 -156 396 -157T393 -175Q389 -188 383 -194H370Q339 -192 262 -192Q234 -192 211 -192T174 -192T157 -193Q143 -193 143 -185Q143 -182 145 -170Q149 -154 152 -151T172 -148Q220 -148 230 -141Q238 -136 258 -53T279 32Q279 33 272 29Q224 -10 172 -10Q117 -10 75 30T33 157ZM352 326Q329 405 277 405Q242 405 210 374T160 293Q131 214 119 129Q119 126 119 118T118 106Q118 61 136 44T179 26Q233 26 290 98L298 109L352 326Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="#E5-MJMATHI-71" x="0" y="0"></use></g></svg></span><script type="math/tex">q</script><span>æ¥è‡ªDecoderï¼Œ</span><span class="MathJax_SVG" tabindex="-1" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="5.631ex" height="2.344ex" viewBox="0 -755.9 2424.3 1009.2" role="img" focusable="false" style="vertical-align: -0.588ex;"><defs><path stroke-width="0" id="E6-MJMATHI-61" d="M33 157Q33 258 109 349T280 441Q331 441 370 392Q386 422 416 422Q429 422 439 414T449 394Q449 381 412 234T374 68Q374 43 381 35T402 26Q411 27 422 35Q443 55 463 131Q469 151 473 152Q475 153 483 153H487Q506 153 506 144Q506 138 501 117T481 63T449 13Q436 0 417 -8Q409 -10 393 -10Q359 -10 336 5T306 36L300 51Q299 52 296 50Q294 48 292 46Q233 -10 172 -10Q117 -10 75 30T33 157ZM351 328Q351 334 346 350T323 385T277 405Q242 405 210 374T160 293Q131 214 119 129Q119 126 119 118T118 106Q118 61 136 44T179 26Q217 26 254 59T298 110Q300 114 325 217T351 328Z"></path><path stroke-width="0" id="E6-MJMAIN-2C" d="M78 35T78 60T94 103T137 121Q165 121 187 96T210 8Q210 -27 201 -60T180 -117T154 -158T130 -185T117 -194Q113 -194 104 -185T95 -172Q95 -168 106 -156T131 -126T157 -76T173 -3V9L172 8Q170 7 167 6T161 3T152 1T140 0Q113 0 96 17Z"></path><path stroke-width="0" id="E6-MJMATHI-6B" d="M121 647Q121 657 125 670T137 683Q138 683 209 688T282 694Q294 694 294 686Q294 679 244 477Q194 279 194 272Q213 282 223 291Q247 309 292 354T362 415Q402 442 438 442Q468 442 485 423T503 369Q503 344 496 327T477 302T456 291T438 288Q418 288 406 299T394 328Q394 353 410 369T442 390L458 393Q446 405 434 405H430Q398 402 367 380T294 316T228 255Q230 254 243 252T267 246T293 238T320 224T342 206T359 180T365 147Q365 130 360 106T354 66Q354 26 381 26Q429 26 459 145Q461 153 479 153H483Q499 153 499 144Q499 139 496 130Q455 -11 378 -11Q333 -11 305 15T277 90Q277 108 280 121T283 145Q283 167 269 183T234 206T200 217T182 220H180Q168 178 159 139T145 81T136 44T129 20T122 7T111 -2Q98 -11 83 -11Q66 -11 57 -1T48 16Q48 26 85 176T158 471L195 616Q196 629 188 632T149 637H144Q134 637 131 637T124 640T121 647Z"></path><path stroke-width="0" id="E6-MJMATHI-76" d="M173 380Q173 405 154 405Q130 405 104 376T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Q21 294 29 316T53 368T97 419T160 441Q202 441 225 417T249 361Q249 344 246 335Q246 329 231 291T200 202T182 113Q182 86 187 69Q200 26 250 26Q287 26 319 60T369 139T398 222T409 277Q409 300 401 317T383 343T365 361T357 383Q357 405 376 424T417 443Q436 443 451 425T467 367Q467 340 455 284T418 159T347 40T241 -11Q177 -11 139 22Q102 54 102 117Q102 148 110 181T151 298Q173 362 173 380Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="#E6-MJMATHI-61" x="0" y="0"></use><use xlink:href="#E6-MJMAIN-2C" x="529" y="0"></use><use xlink:href="#E6-MJMATHI-6B" x="973" y="0"></use><use xlink:href="#E6-MJMAIN-2C" x="1494" y="0"></use><use xlink:href="#E6-MJMATHI-76" x="1939" y="0"></use></g></svg></span><script type="math/tex">a,k,v</script><span>æ¥è‡ªEncoderï¼‰ä¹‹åçš„è®¡ç®—å’Œself-attentionç±»ä¼¼ï¼Œå¾—åˆ°åŠ æƒå€¼åœ¨è¾“å…¥å…¨è¿æ¥å±‚ä¸­ã€‚</span></p><p><img src="https://s1.328888.xyz/2022/05/03/hr2ud.png" style="zoom:67%;" /></p><p><span>æ¥è‡ªICASSçš„æ–‡ç« </span><a href='[Listen, attend and spell: A neural network for large vocabulary conversational speech recognition | IEEE Conference Publication | IEEE Xplore](https://ieeexplore.ieee.org/document/7472621)'><span>Listen, attend and spell: A neural network for large vocabulary conversational speech recognition</span></a><span>â€”â€”seq2seqç¡¬åšè¯­éŸ³è¯†åˆ«ï¼Œç¨é€ŠäºSOTAã€‚æœ‰è¶£çš„æ˜¯ï¼Œè¿™é‡Œå·²ç»å‡ºç°attentionçš„æœºåˆ¶ï¼Œæ˜¯å…ˆæœ‰cross attentionå†æœ‰self-attentionã€‚</span></p><p><img src="https://s1.328888.xyz/2022/05/03/hr8dQ.png" style="zoom:67%;" /></p><p><span>attentionåˆ†æ•°è¾ƒé«˜çš„éƒ¨åˆ†å‡ ä¹å°±æ˜¯ä»å·¦å¾€å³åç§»ï¼ˆmodeè‡³ä¸Šè€Œä¸‹ï¼‰ã€‚</span></p><p><span>åŸè®ºæ–‡ä¸­ä¼šç”¨Encoderæœ€åä¸€å±‚è¾“å‡ºä½œä¸ºæœ€ç»ˆè¾“å‡ºï¼Œä¹Ÿå¯ä»¥ä¸è¿™æ ·ï¼Œå¤šä¸€äº›å¦å¤–æ–°çš„æƒ³æ³•ï¼Œä¹Ÿæœ‰äººå°è¯•ä¸åŒçš„cross-attentionï¼Œä¾‹å¦‚</span><a href='https://arxiv.org/abs/2005.08081'><span>æ–‡ç« </span></a><span>ã€‚è¿™é‡Œä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªç ”ç©¶é—®é¢˜ã€‚</span></p><hr /><p><strong><span>è¯­éŸ³è¯†åˆ«ä»»åŠ¡åœ¨å®é™…çš„trainä¸‹</span></strong><span>ï¼Œæˆ‘ä»¬å¸Œæœ›distributionçš„æ¦‚ç‡å€¼è¦å’Œground truthï¼ˆé€šå¸¸å°±æ˜¯one-hot vectorï¼‰è¶Šæ¥è¿‘è¶Šå¥½ï¼ˆä¸¤è€…åšcross entropyå¾—åˆ°çš„å€¼è¶Šå°è¶Šå¥½ï¼‰ï¼Œè¿™ç©æ„å’Œåˆ†ç±»å¾ˆåƒï¼Œæ¯æ¬¡åœ¨é€šè¿‡ä¸€æ®µè¯­éŸ³äº§ç”Ÿä¸€ä¸ªä¸­æ–‡å­—çš„è¿‡ç¨‹éƒ½åƒæ˜¯ä¸€ä¸ªåˆ†ç±»è¿‡ç¨‹ã€‚æ¯æ¬¡â€œåˆ†ç±»â€éƒ½ä¼šè®¡ç®—ä¸€æ¬¡cross entropyï¼Œæ¯æ¬¡æ€»å’Œèµ·æ¥çš„entropyæœŸæœ›å…¶è¶Šæ¥è¶Šå°ã€‚æ³¨æ„åˆ°è¿˜æœ‰æœ‰ENDå’ŒSTARTçš„ç‰¹æ®Šå­—ç¬¦ï¼Œé‚£ä¹ˆè¿™ä¸ªä½ç½®çš„distributionå€¼åº”å½“ä¸å¯¹åº”ç‰¹æ®Šå­—ç¬¦çš„one-hotçš„cross-entropyè¶Šå°è¶Šå¥½ã€‚å¦å¤–ï¼Œåœ¨è®­ç»ƒçš„æ—¶å€™Decoderä¼šè¾“å…¥ground truthè€Œéæˆ‘ä»¬ä¹‹å‰æ‰€æåˆ°çš„å‰ä¸€ä¸ªdistributionâ€”â€”è¿™ä»¶äº‹å«åš</span><strong><span>Teacher Forcing</span></strong><span>ï¼šusing the ground truth as inputã€‚</span></p><p><span>ä½†æ˜¯testçš„æ—¶å€™ï¼Œæ˜¾ç„¶ä¸èƒ½æŠŠæ­£ç¡®ç­”æ¡ˆinputè¿›å»ï¼Œè¿™æ—¶å€™decoderåªèƒ½çœ‹åˆ°è‡ªå·±çš„è¾“å…¥å’Œè¾“å‡ºï¼Œè¿™ä¸­é—´æ˜¾ç„¶æœ‰ä¸€ä¸ªMismatchã€‚</span></p><p><span>è¿™ä¸¤è€…çš„mismatchçš„ç°è±¡ç§°ä¹‹ä¸º</span><strong><span>exposure bias</span></strong><span>ï¼Œæ€ä¹ˆè§£å†³ï¼ˆç¼“è§£ï¼‰å‘¢ï¼Ÿç›´æ¥åœ¨Decoderçš„è¾“å…¥åŠ ä¸€ç‚¹noiseï¼Œå®ƒåè€Œä¼šå­¦çš„æ›´å¥½ã€‚</span></p><ul><li><p><span>Scheduled Sampling</span></p><p><span>å‚è€ƒæ–‡çŒ®åˆ—è¡¨ï¼š</span><a href='https://arxiv.org/abs/1506.03099'><span>Original Scheduled Sampling</span></a><span>ã€</span><a href='https://arxiv.org/abs/1906.07651'><span>Scheduled Sampling for Transformer</span></a><span>ã€</span><a href='https://arxiv.org/abs/1906.04331'><span>Parallel Scheduled Sampling</span></a></p><p><span>ä½¿ç”¨Scheduled Samplingä¼šä¼¤å®³åˆ°Transformerçš„å¹³è¡ŒåŒ–ã€‚æ‰€ä»¥transformerçš„scheduled samplingæ‹›æ•°å’Œä¼ ç»Ÿçš„ä¸ä¸€æ ·ã€‚</span></p></li></ul><h5><a name="è®­ç»ƒseq2seqæ¨¡å‹çš„tips" class="md-header-anchor"></a><span>è®­ç»ƒseq2seqæ¨¡å‹çš„tips</span></h5><h6><a name="ucopy-mechanismu" class="md-header-anchor"></a><u><span>Copy Mechanism</span></u></h6><p><span>è®©Decoderä»è¾“å…¥â€œå¤åˆ¶â€ä¸€äº›ä¸œè¥¿è¿›æ¥å½“ä½œè¾“å‡ºï¼Œæ¯”å¦‚èŠå¤©æœºå™¨äººğŸ‘‡</span></p><p><img src="https://s1.328888.xyz/2022/05/03/hrA33.png" style="zoom: 33%;" /></p><p><span>è¿˜æœ‰æ¯”å¦‚è¯´åš</span><u><span>æ‘˜è¦ï¼ˆSummarizationï¼‰</span></u><span>ä»»åŠ¡ï¼Œ</span><a href='https://arxiv.org/abs/1704.04368'><span>å‚è€ƒæ–‡çŒ®</span></a></p><p><span>æœ€æ—©ä»è¾“å…¥å¤åˆ¶ä¸œè¥¿å½“è¾“å‡ºçš„ä¸€éƒ¨åˆ†çš„æ¨¡å‹å«åšPointer Network,åæ¥æœ‰ä¸€ç¯‡å˜å½¢</span><a href='https://arxiv.org/abs/1603.06393'><span>Copy Network</span></a></p><h6><a name="uguided-attentionu" class="md-header-anchor"></a><u><span>Guided Attention</span></u></h6><p><span>è¦æ±‚æœºå™¨å»é¢†å¯¼attentionçš„è¿‡ç¨‹ï¼Œä½¿å…¶æœ‰å›ºå®šçš„æ–¹å¼è¿›è¡Œã€‚</span></p><p><img src="https://s1.328888.xyz/2022/05/03/hrhE4.png" style="zoom:67%;" /></p><ul><li><span>Monotonic Attention</span></li><li><span>Location-aware Attention</span></li></ul><h6><a name="ubeam-searchué›†æŸæœç´¢" class="md-header-anchor"></a><u><span>Beam Search</span></u><span>ï¼šé›†æŸæœç´¢</span></h6><p><img src="https://s1.328888.xyz/2022/05/03/hrH8B.png" style="zoom:67%;" /></p><ul><li><span>Greedy Decoding</span></li></ul><p><span>å¯¹äºç›®çš„å’Œç­”æ¡ˆæ¯”è¾ƒæ˜ç¡®çš„ä»»åŠ¡ï¼ŒBeam Searchæ¯”è¾ƒæœ‰å¸®åŠ©ã€‚ä½†æ˜¯å¯¹äºä¸€äº›éœ€è¦æœºå™¨å‘æŒ¥â€œåˆ›é€ åŠ›â€çš„ä»»åŠ¡ï¼Œä¸å¤ªå¥½ç”¨ã€‚åœ¨å®è·µä¸­ï¼ŒåŠ å…¥ä¸€äº›éšæœºæ€§ï¼ˆnoiseï¼‰å¯èƒ½ç»“æœä¼šå‡ºä¹æ„æ–™çš„å¥½ã€‚</span></p><p><span>é‡åˆ°ç”¨optimizationè§£å†³ä¸äº†çš„é—®é¢˜ï¼Œç”¨RLï¼ˆReinforcement Learningï¼‰</span><strong><span>ç¡¬trainä¸€å‘</span></strong><span>å°±å¯¹äº†ã€‚æŠŠloss functionå½“ä½œæ˜¯awardï¼ŒæŠŠä½ çš„decoderå½“ä½œæ˜¯Agentï¼Œæ˜¯æœ‰å¯èƒ½å¯ä»¥åšçš„ã€‚[</span><a href='https://arxiv.org/abs/1511.06732'><span>1511.06732</span><span>]</span><span> Sequence Level Training with Recurrent Neural Networks (arxiv.org)</span></a></p><p>&nbsp;</p></div>
</body>
</html>